<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Maui.MainPage"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1f1f1f}">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20,10">
            
            <!-- Header Section -->
            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto" 
                  ColumnSpacing="15" RowSpacing="5" Margin="0,10">
                
                <!-- App Icon -->
                <Border Grid.Row="0" Grid.Column="0" 
                        Grid.RowSpan="2"
                        BackgroundColor="{StaticResource Primary}"
                        StrokeThickness="0"
                        WidthRequest="50"
                        HeightRequest="50">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <Path Data="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                          Fill="White"
                          WidthRequest="28"
                          HeightRequest="28"
                          HorizontalOptions="Center"
                          VerticalOptions="Center"/>
                </Border>
                
                <!-- Title and Subtitle -->
                <VerticalStackLayout Grid.Row="0" Grid.Column="1" Spacing="5">
                    <Label Text="Smart Home"
                           FontSize="28"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    <Label Text="8 devices • 5 active"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=Gray, Dark={StaticResource Gray300}}"/>
                </VerticalStackLayout>
                
                <!-- Action Icons -->
                <HorizontalStackLayout Grid.Row="0" Grid.Column="2" 
                                       Grid.RowSpan="2"
                                       Spacing="15"
                                       VerticalOptions="Center">
                    <Path Data="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"
                          Fill="{AppThemeBinding Light=Black, Dark=White}"
                          WidthRequest="20"
                          HeightRequest="20"/>
                    <Border x:Name="DarkModeButton"
                            BackgroundColor="Transparent"
                            Padding="5"
                            StrokeThickness="0"
                            WidthRequest="32"
                            HeightRequest="32">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnDarkModeTapped"/>
                        </Border.GestureRecognizers>
                        <Path x:Name="DarkModeIcon"
                              Data="M12.34 2.02C6.59 1.82 2 6.42 2 12c0 5.52 4.48 10 10 10 3.71 0 6.93-2.02 8.66-5.02-7.51-.25-13.12-6.66-13.12-14.26 0-.78.07-1.53.2-2.26z"
                              Fill="{AppThemeBinding Light=Black, Dark=White}"
                              WidthRequest="22"
                              HeightRequest="22"
                              HorizontalOptions="Center"
                              VerticalOptions="Center"/>
                    </Border>
                    <Path Data="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                          Fill="{AppThemeBinding Light=Black, Dark=White}"
                          WidthRequest="20"
                          HeightRequest="20"/>
                </HorizontalStackLayout>
            </Grid>

            <!-- Weather/Status Card (Good Evening Card) -->
            <Border StrokeThickness="0" 
                    Margin="0,10">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#4FC3F7" Offset="0"/>
                        <GradientStop Color="#512BD4" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid RowDefinitions="Auto,Auto,Auto" 
                      ColumnDefinitions="*,Auto"
                      Padding="25,25"
                      RowSpacing="8">
                    
                    <!-- Greeting -->
                    <Label Grid.Row="0" Grid.Column="0"
                           Text="Good Evening!"
                           FontSize="32"
                           FontAttributes="Bold"
                           TextColor="White"/>
                    
                    <!-- Status Message -->
                    <Label Grid.Row="1" Grid.Column="0"
                           Text="Your home is comfortable and secure"
                           FontSize="16"
                           TextColor="White"
                           Opacity="0.9"
                           Margin="0,5,0,0"/>
                    
                    <!-- Status Indicators -->
                    <HorizontalStackLayout Grid.Row="2" Grid.Column="0"
                                           Spacing="20"
                                           Margin="0,15,0,0">
                        <HorizontalStackLayout Spacing="8"
                                               VerticalOptions="Center">
                            <Path Data="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"
                                  Fill="White"
                                  WidthRequest="18"
                                  HeightRequest="18"/>
                            <Label Text="Secure"
                                   FontSize="14"
                                   TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="8"
                                               VerticalOptions="Center">
                            <Path Data="M7 2v11h3v9l7-12h-4l4-8z"
                                  Fill="White"
                                  WidthRequest="18"
                                  HeightRequest="18"/>
                            <Label Text="89% Efficient"
                                   FontSize="14"
                                   TextColor="White"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </HorizontalStackLayout>
                    
                    <!-- Temperature -->
                    <VerticalStackLayout Grid.Row="0" Grid.Column="1"
                                        Grid.RowSpan="3"
                                        HorizontalOptions="End"
                                        VerticalOptions="Start"
                                        Spacing="5">
                        <Label Text="24°C"
                               FontSize="48"
                               FontAttributes="Bold"
                               TextColor="White"
                               HorizontalOptions="End"/>
                        <Label Text="Perfect"
                               FontSize="16"
                               TextColor="White"
                               Opacity="0.9"
                               HorizontalOptions="End"/>
                    </VerticalStackLayout>
                </Grid>
            </Border>

            <!-- Navigation Tabs -->
            <Border BackgroundColor="White"
                    StrokeThickness="0"
                    Padding="5"
                    Margin="0,10">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="25"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black"
                            Offset="0,2"
                            Radius="8"
                            Opacity="0.1"/>
                </Border.Shadow>
                <Grid ColumnDefinitions="*,*,*" 
                      ColumnSpacing="0"
                      Padding="5">
                    
                    <!-- Compact Tab (Selected) -->
                    <Border Grid.Column="0"
                            x:Name="CompactTab"
                            BackgroundColor="White"
                            StrokeThickness="0"
                            Padding="20,12">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnCompactTabTapped"/>
                        </Border.GestureRecognizers>
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="20"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,1"
                                    Radius="4"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Label x:Name="CompactTabLabel"
                               Text="Compact"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}"
                               HorizontalOptions="Center"/>
                    </Border>
                    
                    <!-- Smart Tab (Unselected) -->
                    <Border Grid.Column="1"
                            x:Name="SmartTab"
                            BackgroundColor="Transparent"
                            StrokeThickness="0"
                            Padding="20,12">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnSmartTabTapped"/>
                        </Border.GestureRecognizers>
                        <Label x:Name="SmartTabLabel"
                               Text="Smart"
                               FontSize="14"
                               TextColor="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                               HorizontalOptions="Center"/>
                    </Border>
                    
                    <!-- Premium Tab (Unselected) -->
                    <Label Grid.Column="2"
                           Text="Premium"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Padding="20,12"/>
                </Grid>
            </Border>

            <!-- Compact Control Section -->
            <VerticalStackLayout x:Name="CompactControlSection" Spacing="0">
                <!-- Section Title -->
                <VerticalStackLayout Spacing="5" Margin="0,10">
                    <Label Text="Compact Control"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    <Label Text="Space-efficient cards for quick access"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray400}}"/>
                </VerticalStackLayout>

                <!-- Device Control Cards -->
                <VerticalStackLayout Spacing="15">
                
                <!-- Ceiling Fan -->
                <Border x:Name="CeilingFanCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="10"
                                Opacity="0.08"/>
                    </Border.Shadow>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="CeilingFanIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="CeilingFanIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="CeilingFanIconPath"
                                  Data="M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5 1.52.11c1.56.11 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.95 6 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04 2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Ceiling Fan"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Living Room"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="CeilingFanSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnCeilingFanSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- Ceiling Fan Expanded Section (Speed Control) -->
                <Border x:Name="CeilingFanExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,8,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#FAFAFA" Offset="0"/>
                            <GradientStop Color="#F0F0F0" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,4"
                                Radius="12"
                                Opacity="0.12"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        
                        <!-- Separator Line -->
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        
                        <!-- Speed Control Section -->
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M4 9h12v2H4zm0-4h12v2H4zm0 8h8v2H4zm10 0h2v2h-2zm-2-4h2v2h-2zm4 0h2v2h-2z"
                                      Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Speed"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            
                            <Label Grid.Column="2"
                                   x:Name="CeilingFanSpeedValueLabel"
                                   Text="2"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#2196F3"
                                   VerticalOptions="Center"/>
                        </Grid>
                        
                        <!-- Speed Slider -->
                        <Slider x:Name="CeilingFanSpeedSlider"
                                Minimum="1"
                                Maximum="5"
                                Value="2"
                                MinimumTrackColor="#2196F3"
                                MaximumTrackColor="{AppThemeBinding Light=#212121, Dark=#404040}"
                                ThumbColor="White"
                                ValueChanged="OnCeilingFanSpeedChanged"
                                HeightRequest="40"/>
                        
                        <!-- Range Labels -->
                        <Grid ColumnDefinitions="*,*">
                            <Label Grid.Column="0"
                                   Text="Low"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="Start"/>
                            <Label Grid.Column="1"
                                   Text="High"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="End"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Air Conditioner -->
                <Border x:Name="AirConditionerCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="AirConditionerIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="AirConditionerIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="AirConditionerIconPath"
                                  Data="M19.8 18.4L14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.37.49-.1 1.1.5 1.1h14.6c.6 0 .87-.61.5-1.1z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Air Conditioner"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Bedroom"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="AirConditionerSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnAirConditionerSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- Air Conditioner Expanded Section (Temperature Control) -->
                <Border x:Name="AirConditionerExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,5,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"
                                      Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Temperature"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Grid.Column="2"
                                   x:Name="AirConditionerTempValueLabel"
                                   Text="22°C"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#512BD4"
                                   VerticalOptions="Center"/>
                        </Grid>
                        <Slider x:Name="AirConditionerTempSlider"
                                Minimum="16"
                                Maximum="30"
                                Value="22"
                                MinimumTrackColor="#212121"
                                MaximumTrackColor="#512BD4"
                                ThumbColor="White"
                                ValueChanged="OnAirConditionerTempChanged"
                                HeightRequest="40"/>
                        <Grid ColumnDefinitions="*,*">
                            <Label Grid.Column="0"
                                   Text="16°C"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="Start"/>
                            <Label Grid.Column="1"
                                   Text="30°C"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="End"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Smart TV -->
                <Border x:Name="SmartTVCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="SmartTVIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="SmartTVIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="SmartTVIconPath"
                                  Data="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Smart TV"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Living Room"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="SmartTVSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnSmartTVSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- RGB Lights -->
                <Border x:Name="RGBLightsCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="RGBLightsIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="RGBLightsIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="RGBLightsIconPath"
                                  Data="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="RGB Lights"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Kitchen"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="RGBLightsSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnRGBLightsSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- RGB Lights Expanded Section (Brightness & Color Control) -->
                <Border x:Name="RGBLightsExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,5,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        <!-- Brightness Control -->
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M7 2v2h1v14H7v2h10v-2h-1V4h1V2H7zm2 2h6v12H9V4z"
                                      Fill="#FF9800"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Brightness"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Grid.Column="2"
                                   x:Name="RGBLightsBrightnessValueLabel"
                                   Text="80%"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#FF9800"
                                   VerticalOptions="Center"/>
                        </Grid>
                        <Slider x:Name="RGBLightsBrightnessSlider"
                                Minimum="0"
                                Maximum="100"
                                Value="80"
                                MinimumTrackColor="#212121"
                                MaximumTrackColor="#FF9800"
                                ThumbColor="White"
                                ValueChanged="OnRGBLightsBrightnessChanged"
                                HeightRequest="40"/>
                        <!-- Color Control -->
                        <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.8-1.59-2.86-3.87-2.86-6.49 0-3.31 2.69-6 6-6s6 2.69 6 6c0 2.62-1.06 4.9-2.86 6.49-.24.27-.39.62-.39 1.01 0 .83.67 1.5 1.5 1.5H21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"
                                      Fill="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Color"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Border Grid.Column="2"
                                    BackgroundColor="#2196F3"
                                    WidthRequest="30"
                                    HeightRequest="30"
                                    StrokeThickness="2"
                                    Stroke="White"
                                    Margin="10,0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="6"/>
                                </Border.StrokeShape>
                            </Border>
                            <BoxView Grid.Column="3"
                                     BackgroundColor="#2196F3"
                                     WidthRequest="100"
                                     HeightRequest="30"
                                     Margin="5,0,0,0"
                                     CornerRadius="15"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Table Fan -->
                <Border x:Name="TableFanCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="TableFanIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="TableFanIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="TableFanIconPath"
                                  Data="M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5 1.52.11c1.56.11 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.95 6 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04 2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Table Fan"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Study Room"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="TableFanSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnTableFanSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- Table Fan Expanded Section (Speed Control) -->
                <Border x:Name="TableFanExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,5,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M4 9h12v2H4zm0-4h12v2H4zm0 8h8v2H4zm10 0h2v2h-2zm-2-4h2v2h-2zm4 0h2v2h-2z"
                                      Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Speed"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Grid.Column="2"
                                   x:Name="TableFanSpeedValueLabel"
                                   Text="2"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#2196F3"
                                   VerticalOptions="Center"/>
                        </Grid>
                        <Slider x:Name="TableFanSpeedSlider"
                                Minimum="1"
                                Maximum="5"
                                Value="2"
                                MinimumTrackColor="#2196F3"
                                MaximumTrackColor="{AppThemeBinding Light=#212121, Dark=#404040}"
                                ThumbColor="White"
                                ValueChanged="OnTableFanSpeedChanged"
                                HeightRequest="40"/>
                        <Grid ColumnDefinitions="*,*">
                            <Label Grid.Column="0"
                                   Text="Low"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="Start"/>
                            <Label Grid.Column="1"
                                   Text="High"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="End"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Pendant Lights -->
                <Border x:Name="PendantLightsCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="PendantLightsIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="PendantLightsIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="PendantLightsIconPath"
                                  Data="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Pendant Lights"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Dining Room"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="PendantLightsSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnPendantLightsSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- Pendant Lights Expanded Section (Brightness & Color Control) -->
                <Border x:Name="PendantLightsExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,5,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        <!-- Brightness Control -->
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M7 2v2h1v14H7v2h10v-2h-1V4h1V2H7zm2 2h6v12H9V4z"
                                      Fill="#FF9800"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Brightness"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Grid.Column="2"
                                   x:Name="PendantLightsBrightnessValueLabel"
                                   Text="80%"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#FF9800"
                                   VerticalOptions="Center"/>
                        </Grid>
                        <Slider x:Name="PendantLightsBrightnessSlider"
                                Minimum="0"
                                Maximum="100"
                                Value="80"
                                MinimumTrackColor="#212121"
                                MaximumTrackColor="#FF9800"
                                ThumbColor="White"
                                ValueChanged="OnPendantLightsBrightnessChanged"
                                HeightRequest="40"/>
                        <!-- Color Control -->
                        <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.8-1.59-2.86-3.87-2.86-6.49 0-3.31 2.69-6 6-6s6 2.69 6 6c0 2.62-1.06 4.9-2.86 6.49-.24.27-.39.62-.39 1.01 0 .83.67 1.5 1.5 1.5H21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"
                                      Fill="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Color"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Border Grid.Column="2"
                                    BackgroundColor="#2196F3"
                                    WidthRequest="30"
                                    HeightRequest="30"
                                    StrokeThickness="2"
                                    Stroke="White"
                                    Margin="10,0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="6"/>
                                </Border.StrokeShape>
                            </Border>
                            <BoxView Grid.Column="3"
                                     BackgroundColor="#2196F3"
                                     WidthRequest="100"
                                     HeightRequest="30"
                                     Margin="5,0,0,0"
                                     CornerRadius="15"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Split AC -->
                <Border x:Name="SplitACCard"
                        StrokeThickness="0" 
                        Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border x:Name="SplitACIconBorder"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush x:Name="SplitACIconGradient" StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F0F0F0" Offset="0"/>
                                    <GradientStop Color="#F0F0F0" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Path x:Name="SplitACIconPath"
                                  Data="M19.8 18.4L14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.37.49-.1 1.1.5 1.1h14.6c.6 0 .87-.61.5-1.1z"
                                  Fill="#666666"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="Split AC"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Master Bedroom"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                x:Name="SplitACSwitch"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"
                                Toggled="OnSplitACSwitchToggled"/>
                    </Grid>
                </Border>

                <!-- Split AC Expanded Section (Temperature Control) -->
                <Border x:Name="SplitACExpandedSection"
                        IsVisible="False"
                        StrokeThickness="0"
                        Padding="20,20"
                        Margin="0,5,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="15">
                        <BoxView HeightRequest="1"
                                 Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                 Margin="0,0,0,10"/>
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                <Path Data="M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"
                                      Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Temperature"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <Label Grid.Column="2"
                                   x:Name="SplitACTempValueLabel"
                                   Text="22°C"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="#512BD4"
                                   VerticalOptions="Center"/>
                        </Grid>
                        <Slider x:Name="SplitACTempSlider"
                                Minimum="16"
                                Maximum="30"
                                Value="22"
                                MinimumTrackColor="#212121"
                                MaximumTrackColor="#512BD4"
                                ThumbColor="White"
                                ValueChanged="OnSplitACTempChanged"
                                HeightRequest="40"/>
                        <Grid ColumnDefinitions="*,*">
                            <Label Grid.Column="0"
                                   Text="16°C"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="Start"/>
                            <Label Grid.Column="1"
                                   Text="30°C"
                                   FontSize="12"
                                   TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                   HorizontalOptions="End"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- TV -->
                <Border StrokeThickness="0" Padding="20,15">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="15"/>
                    </Border.StrokeShape>
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#F5F5F5" Offset="0"/>
                            <GradientStop Color="#E8E8E8" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Border Grid.Column="0"
                                BackgroundColor="#F0F0F0"
                                WidthRequest="50"
                                HeightRequest="50"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Path Data="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"
                                  Fill="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
                                  WidthRequest="24"
                                  HeightRequest="24"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Spacing="3">
                            <Label Text="TV"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                            <Label Text="Bedroom"
                                   FontSize="14"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2"
                                IsToggled="False"
                                OnColor="#512BD4"
                                ThumbColor="White"
                                VerticalOptions="Center"/>
                    </Grid>
                </Border>
                </VerticalStackLayout>
            </VerticalStackLayout>

            <!-- Smart Controls Section -->
            <VerticalStackLayout x:Name="SmartControlsSection" 
                                IsVisible="False" 
                                Spacing="0">
                <!-- Section Title -->
                <VerticalStackLayout Spacing="5" Margin="0,10">
                    <Label Text="Smart Controls"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    <Label Text="Balanced interface with intelligent features"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray400}}"/>
                </VerticalStackLayout>

                <!-- Device Control Cards (Same as Compact but different order) -->
                <VerticalStackLayout Spacing="15">
                    <!-- Ceiling Fan -->
                    <Border x:Name="SmartCeilingFanCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartCeilingFanIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartCeilingFanIconPath"
                                      Data="M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5 1.52.11c1.56.11 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.95 6 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04 2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Ceiling Fan"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Living Room"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartCeilingFanSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartCeilingFanSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- Ceiling Fan Expanded Section (Speed Control) -->
                    <Border x:Name="SmartCeilingFanExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,8,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#FAFAFA" Offset="0"/>
                                <GradientStop Color="#F0F0F0" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,4"
                                    Radius="12"
                                    Opacity="0.12"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M4 9h12v2H4zm0-4h12v2H4zm0 8h8v2H4zm10 0h2v2h-2zm-2-4h2v2h-2zm4 0h2v2h-2z"
                                          Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Speed"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartCeilingFanSpeedValueLabel"
                                       Text="2"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#2196F3"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartCeilingFanSpeedSlider"
                                    Minimum="1"
                                    Maximum="5"
                                    Value="2"
                                    MinimumTrackColor="#2196F3"
                                    MaximumTrackColor="{AppThemeBinding Light=#212121, Dark=#404040}"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartCeilingFanSpeedChanged"
                                    HeightRequest="40"/>
                            <Grid ColumnDefinitions="*,*">
                                <Label Grid.Column="0"
                                       Text="Low"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="Start"/>
                                <Label Grid.Column="1"
                                       Text="High"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="End"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Air Conditioner -->
                    <Border x:Name="SmartAirConditionerCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartAirConditionerIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartAirConditionerIconPath"
                                      Data="M19.8 18.4L14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.37.49-.1 1.1.5 1.1h14.6c.6 0 .87-.61.5-1.1z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Air Conditioner"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Bedroom"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartAirConditionerSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartAirConditionerSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- Air Conditioner Expanded Section (Temperature Control) -->
                    <Border x:Name="SmartAirConditionerExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,5,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.1"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"
                                          Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Temperature"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartAirConditionerTempValueLabel"
                                       Text="22°C"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#512BD4"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartAirConditionerTempSlider"
                                    Minimum="16"
                                    Maximum="30"
                                    Value="22"
                                    MinimumTrackColor="#212121"
                                    MaximumTrackColor="#512BD4"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartAirConditionerTempChanged"
                                    HeightRequest="40"/>
                            <Grid ColumnDefinitions="*,*">
                                <Label Grid.Column="0"
                                       Text="16°C"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="Start"/>
                                <Label Grid.Column="1"
                                       Text="30°C"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="End"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Smart TV -->
                    <Border x:Name="SmartControlsSmartTVCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartControlsSmartTVIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartControlsSmartTVIconPath"
                                      Data="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Smart TV"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Living Room"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartControlsSmartTVSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartControlsSmartTVSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- RGB Lights -->
                    <Border x:Name="SmartRGBLightsCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartRGBLightsIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartRGBLightsIconPath"
                                      Data="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="RGB Lights"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Kitchen"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartRGBLightsSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartRGBLightsSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- RGB Lights Expanded Section (Brightness & Color Control) -->
                    <Border x:Name="SmartRGBLightsExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,5,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.1"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <!-- Brightness Control -->
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M7 2v2h1v14H7v2h10v-2h-1V4h1V2H7zm2 2h6v12H9V4z"
                                          Fill="#FF9800"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Brightness"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartRGBLightsBrightnessValueLabel"
                                       Text="80%"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#FF9800"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartRGBLightsBrightnessSlider"
                                    Minimum="0"
                                    Maximum="100"
                                    Value="80"
                                    MinimumTrackColor="#212121"
                                    MaximumTrackColor="#FF9800"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartRGBLightsBrightnessChanged"
                                    HeightRequest="40"/>
                            <!-- Color Control -->
                            <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.8-1.59-2.86-3.87-2.86-6.49 0-3.31 2.69-6 6-6s6 2.69 6 6c0 2.62-1.06 4.9-2.86 6.49-.24.27-.39.62-.39 1.01 0 .83.67 1.5 1.5 1.5H21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"
                                          Fill="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Color"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Border Grid.Column="2"
                                        BackgroundColor="#2196F3"
                                        WidthRequest="30"
                                        HeightRequest="30"
                                        StrokeThickness="2"
                                        Stroke="White"
                                        Margin="10,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="6"/>
                                    </Border.StrokeShape>
                                </Border>
                                <BoxView Grid.Column="3"
                                         BackgroundColor="#2196F3"
                                         WidthRequest="100"
                                         HeightRequest="30"
                                         Margin="5,0,0,0"
                                         CornerRadius="15"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Table Fan -->
                    <Border x:Name="SmartTableFanCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartTableFanIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartTableFanIconPath"
                                      Data="M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5 1.52.11c1.56.11 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.95 6 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04 2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Table Fan"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Study Room"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartTableFanSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartTableFanSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- Table Fan Expanded Section (Speed Control) -->
                    <Border x:Name="SmartTableFanExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,5,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.1"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M4 9h12v2H4zm0-4h12v2H4zm0 8h8v2H4zm10 0h2v2h-2zm-2-4h2v2h-2zm4 0h2v2h-2z"
                                          Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Speed"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartTableFanSpeedValueLabel"
                                       Text="2"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#2196F3"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartTableFanSpeedSlider"
                                    Minimum="1"
                                    Maximum="5"
                                    Value="2"
                                    MinimumTrackColor="#2196F3"
                                    MaximumTrackColor="{AppThemeBinding Light=#212121, Dark=#404040}"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartTableFanSpeedChanged"
                                    HeightRequest="40"/>
                            <Grid ColumnDefinitions="*,*">
                                <Label Grid.Column="0"
                                       Text="Low"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="Start"/>
                                <Label Grid.Column="1"
                                       Text="High"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="End"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Pendant Lights -->
                    <Border x:Name="SmartPendantLightsCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartPendantLightsIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartPendantLightsIconPath"
                                      Data="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Pendant Lights"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Dining Room"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartPendantLightsSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartPendantLightsSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- Pendant Lights Expanded Section (Brightness & Color Control) -->
                    <Border x:Name="SmartPendantLightsExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,5,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.1"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <!-- Brightness Control -->
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M7 2v2h1v14H7v2h10v-2h-1V4h1V2H7zm2 2h6v12H9V4z"
                                          Fill="#FF9800"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Brightness"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartPendantLightsBrightnessValueLabel"
                                       Text="80%"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#FF9800"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartPendantLightsBrightnessSlider"
                                    Minimum="0"
                                    Maximum="100"
                                    Value="80"
                                    MinimumTrackColor="#212121"
                                    MaximumTrackColor="#FF9800"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartPendantLightsBrightnessChanged"
                                    HeightRequest="40"/>
                            <!-- Color Control -->
                            <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-1.8-1.59-2.86-3.87-2.86-6.49 0-3.31 2.69-6 6-6s6 2.69 6 6c0 2.62-1.06 4.9-2.86 6.49-.24.27-.39.62-.39 1.01 0 .83.67 1.5 1.5 1.5H21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"
                                          Fill="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Color"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Border Grid.Column="2"
                                        BackgroundColor="#2196F3"
                                        WidthRequest="30"
                                        HeightRequest="30"
                                        StrokeThickness="2"
                                        Stroke="White"
                                        Margin="10,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="6"/>
                                    </Border.StrokeShape>
                                </Border>
                                <BoxView Grid.Column="3"
                                         BackgroundColor="#2196F3"
                                         WidthRequest="100"
                                         HeightRequest="30"
                                         Margin="5,0,0,0"
                                         CornerRadius="15"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Split AC -->
                    <Border x:Name="SmartSplitACCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartSplitACIconBorder"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartSplitACIconPath"
                                      Data="M19.8 18.4L14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.37.49-.1 1.1.5 1.1h14.6c.6 0 .87-.61.5-1.1z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="Split AC"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Master Bedroom"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartSplitACSwitch"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartSplitACSwitchToggled"/>
                        </Grid>
                    </Border>

                    <!-- Split AC Expanded Section (Temperature Control) -->
                    <Border x:Name="SmartSplitACExpandedSection"
                            IsVisible="False"
                            StrokeThickness="0"
                            Padding="20,20"
                            Margin="0,5,0,0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.1"/>
                        </Border.Shadow>
                        <VerticalStackLayout Spacing="15">
                            <BoxView HeightRequest="1"
                                     Color="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                                     Margin="0,0,0,10"/>
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                                    <Path Data="M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"
                                          Fill="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"
                                          WidthRequest="20"
                                          HeightRequest="20"/>
                                    <Label Text="Temperature"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#333333, Dark=White}"
                                           VerticalOptions="Center"/>
                                </HorizontalStackLayout>
                                <Label Grid.Column="2"
                                       x:Name="SmartSplitACTempValueLabel"
                                       Text="22°C"
                                       FontSize="24"
                                       FontAttributes="Bold"
                                       TextColor="#512BD4"
                                       VerticalOptions="Center"/>
                            </Grid>
                            <Slider x:Name="SmartSplitACTempSlider"
                                    Minimum="16"
                                    Maximum="30"
                                    Value="22"
                                    MinimumTrackColor="#212121"
                                    MaximumTrackColor="#512BD4"
                                    ThumbColor="White"
                                    ValueChanged="OnSmartSplitACTempChanged"
                                    HeightRequest="40"/>
                            <Grid ColumnDefinitions="*,*">
                                <Label Grid.Column="0"
                                       Text="16°C"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="Start"/>
                                <Label Grid.Column="1"
                                       Text="30°C"
                                       FontSize="12"
                                       TextColor="{AppThemeBinding Light=#999999, Dark=#666666}"
                                       HorizontalOptions="End"/>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- TV -->
                    <Border x:Name="SmartControlsTVCard"
                            StrokeThickness="0" 
                            Padding="20,15">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F5F5F5" Offset="0"/>
                                <GradientStop Color="#E8E8E8" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black"
                                    Offset="0,2"
                                    Radius="10"
                                    Opacity="0.08"/>
                        </Border.Shadow>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Border x:Name="SmartTVIconBorder2"
                                    WidthRequest="50"
                                    HeightRequest="50"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12"/>
                                </Border.StrokeShape>
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#F0F0F0" Offset="0"/>
                                        <GradientStop Color="#F0F0F0" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Path x:Name="SmartTVIconPath2"
                                      Data="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"
                                      Fill="#666666"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="3">
                                <Label Text="TV"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=#333333, Dark=White}"/>
                                <Label Text="Bedroom"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=#666666, Dark=#CCCCCC}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="2"
                                    x:Name="SmartTVSwitch2"
                                    IsToggled="False"
                                    OnColor="#512BD4"
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Toggled="OnSmartTVSwitchToggled2"/>
                        </Grid>
                    </Border>
                </VerticalStackLayout>
            </VerticalStackLayout>

            <!-- Statistics Cards Section -->
            <VerticalStackLayout Spacing="15" Margin="0,20">
                <Label Text="Overview"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                
                <Grid RowDefinitions="Auto,Auto" 
                      ColumnDefinitions="*,*"
                      RowSpacing="15"
                      ColumnSpacing="15">
                    
                    <!-- Active Now Card -->
                    <Border Grid.Row="0" Grid.Column="0"
                            StrokeThickness="0"
                            Padding="20,20">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#E8F5E9" Offset="0"/>
                                <GradientStop Color="#C8E6C9" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <VerticalStackLayout Spacing="10">
                            <Border BackgroundColor="#4CAF50"
                                    WidthRequest="48"
                                    HeightRequest="48"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="24"/>
                                </Border.StrokeShape>
                                <Path Data="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"
                                      Fill="White"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <Label Text="5"
                                   FontSize="36"
                                   FontAttributes="Bold"
                                   TextColor="#4CAF50"/>
                            <Label Text="Active Now"
                                   FontSize="14"
                                   TextColor="#4CAF50"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Efficiency Card -->
                    <Border Grid.Row="0" Grid.Column="1"
                            StrokeThickness="0"
                            Padding="20,20">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#E3F2FD" Offset="0"/>
                                <GradientStop Color="#BBDEFB" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <VerticalStackLayout Spacing="10">
                            <Border BackgroundColor="#2196F3"
                                    WidthRequest="48"
                                    HeightRequest="48"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="24"/>
                                </Border.StrokeShape>
                                <Path Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                                      Fill="White"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <Label Text="92%"
                                   FontSize="36"
                                   FontAttributes="Bold"
                                   TextColor="#2196F3"/>
                            <Label Text="Efficiency"
                                   FontSize="14"
                                   TextColor="#2196F3"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Family Home Card -->
                    <Border Grid.Row="1" Grid.Column="0"
                            StrokeThickness="0"
                            Padding="20,20">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F3E5F5" Offset="0"/>
                                <GradientStop Color="#E1BEE7" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <VerticalStackLayout Spacing="10">
                            <Border BackgroundColor="#9C27B0"
                                    WidthRequest="48"
                                    HeightRequest="48"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="24"/>
                                </Border.StrokeShape>
                                <Path Data="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                      Fill="White"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <Label Text="3"
                                   FontSize="36"
                                   FontAttributes="Bold"
                                   TextColor="#9C27B0"/>
                            <Label Text="Family Home"
                                   FontSize="14"
                                   TextColor="#9C27B0"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Monitoring Card -->
                    <Border Grid.Row="1" Grid.Column="1"
                            StrokeThickness="0"
                            Padding="20,20">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#FFF3E0" Offset="0"/>
                                <GradientStop Color="#FFE0B2" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <VerticalStackLayout Spacing="10">
                            <Border BackgroundColor="#FF9800"
                                    WidthRequest="48"
                                    HeightRequest="48"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="24"/>
                                </Border.StrokeShape>
                                <Path Data="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"
                                      Fill="White"
                                      WidthRequest="24"
                                      HeightRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center"/>
                            </Border>
                            <Label Text="24/7"
                                   FontSize="36"
                                   FontAttributes="Bold"
                                   TextColor="#FF9800"/>
                            <Label Text="Monitoring"
                                   FontSize="14"
                                   TextColor="#FF9800"/>
                        </VerticalStackLayout>
                    </Border>
                </Grid>
            </VerticalStackLayout>

            <!-- Quick Actions Section -->
            <Border StrokeThickness="0"
                    BackgroundColor="White"
                    Margin="0,20"
                    Padding="20,20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="15"/>
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="15">
                    <Label Text="Quick Actions"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        <!-- All On Button -->
                        <Border Grid.Column="0"
                                StrokeThickness="0"
                                Padding="20,15">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#2196F3" Offset="0"/>
                                    <GradientStop Color="#512BD4" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <HorizontalStackLayout Spacing="10"
                                                   HorizontalOptions="Center">
                                <Path Data="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                      Fill="White"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="All On"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Night Mode Button -->
                        <Border Grid.Column="1"
                                BackgroundColor="White"
                                StrokeThickness="1"
                                Stroke="{StaticResource Gray200}"
                                Padding="20,15">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12"/>
                            </Border.StrokeShape>
                            <HorizontalStackLayout Spacing="10"
                                                   HorizontalOptions="Center">
                                <Path Data="M12.34 2.02C6.59 1.82 2 6.42 2 12c0 5.52 4.48 10 10 10 3.71 0 6.93-2.02 8.66-5.02-7.51-.25-13.12-6.66-13.12-14.26 0-.78.07-1.53.2-2.26z"
                                      Fill="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                                      WidthRequest="20"
                                      HeightRequest="20"/>
                                <Label Text="Night Mode"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </Border>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Bottom Navigation Bar -->
            <Border StrokeThickness="0"
                    BackgroundColor="White"
                    Margin="0,20,0,30"
                    Padding="20,15">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="10">
                    
                    <!-- Home Tab (Active) -->
                    <VerticalStackLayout Grid.Column="0"
                                         Spacing="5"
                                         HorizontalOptions="Center">
                        <Border BackgroundColor="#E3F2FD"
                                WidthRequest="40"
                                HeightRequest="40"
                                StrokeThickness="0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Path Data="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                  Fill="{StaticResource Primary}"
                                  WidthRequest="20"
                                  HeightRequest="20"
                                  HorizontalOptions="Center"
                                  VerticalOptions="Center"/>
                        </Border>
                        <Label Text="Home"
                               FontSize="12"
                               TextColor="{StaticResource Primary}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                    <!-- Rooms Tab -->
                    <VerticalStackLayout Grid.Column="1"
                                         Spacing="5"
                                         HorizontalOptions="Center">
                        <Path Data="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"
                              Fill="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                              WidthRequest="24"
                              HeightRequest="24"
                              HorizontalOptions="Center"/>
                        <Label Text="Rooms"
                               FontSize="12"
                               TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                    <!-- Scenes Tab -->
                    <VerticalStackLayout Grid.Column="2"
                                         Spacing="5"
                                         HorizontalOptions="Center">
                        <Path Data="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"
                              Fill="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                              WidthRequest="24"
                              HeightRequest="24"
                              HorizontalOptions="Center"/>
                        <Label Text="Scenes"
                               FontSize="12"
                               TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                    <!-- Settings Tab -->
                    <VerticalStackLayout Grid.Column="3"
                                         Spacing="5"
                                         HorizontalOptions="Center">
                        <Path Data="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                              Fill="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                              WidthRequest="24"
                              HeightRequest="24"
                              HorizontalOptions="Center"/>
                        <Label Text="Settings"
                               FontSize="12"
                               TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray300}}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Grid>
            </Border>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
